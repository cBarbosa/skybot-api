{
	"info": {
		"_postman_id": "776b9378-ac3d-4a4e-b713-15d1363f9ebe",
		"name": "Skybot API - Complete Collection",
		"description": "Cole√ß√£o completa de endpoints da API do Skybot - Bot de integra√ß√£o com Slack\n\n## Autentica√ß√£o\n\nA maioria dos endpoints requer autentica√ß√£o via API Key no header `X-Api-Key`.\n\n**Endpoints p√∫blicos (sem autentica√ß√£o):**\n- `/` - API Info\n- `/health` - Health checks\n- `/slack/install` - Gerar link de instala√ß√£o\n- `/slack/oauth` - OAuth callback\n- `/slack/events` - Eventos do Slack\n- `/slack/interactive` - Intera√ß√µes do Slack\n\n**Endpoints protegidos:**\nTodos os outros endpoints requerem o header `X-Api-Key` com uma chave v√°lida.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "26022166",
		"_collection_link": "https://skymedia-tech.postman.co/workspace/Team-Workspace~0edd2130-40d8-46df-80f3-883c36768914/collection/26022166-776b9378-ac3d-4a4e-b713-15d1363f9ebe?action=share&source=collection_link&creator=26022166"
	},
	"item": [
		{
			"name": "Info & Health",
			"item": [
				{
					"name": "API Info",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl{{environment}}}}",
							"host": [
								"{{baseUrl{{environment}}}}"
							]
						},
						"description": "Retorna informa√ß√µes da API (nome, vers√£o, ambiente, timestamp)\n\n**Endpoint p√∫blico** - n√£o requer autentica√ß√£o."
					},
					"response": [
						{
							"name": "Sucesso",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseUrl{{environment}}}}",
									"host": [
										"{{baseUrl{{environment}}}}"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": null,
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Date",
									"value": "Fri, 14 Nov 2025 14:04:26 GMT"
								},
								{
									"key": "Server",
									"value": "Kestrel"
								},
								{
									"key": "Transfer-Encoding",
									"value": "chunked"
								}
							],
							"cookie": [],
							"body": "{\n    \"application\": \"Skybot API\",\n    \"version\": \"1.0.0\",\n    \"environment\": \"Development\",\n    \"timestamp\": \"2025-11-14T14:04:26.9789201Z\"\n}"
						}
					]
				},
				{
					"name": "Health Check",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl{{environment}}}}/health",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"health"
							]
						},
						"description": "Verifica o status de sa√∫de da aplica√ß√£o e depend√™ncias\n\n**Endpoint p√∫blico** - n√£o requer autentica√ß√£o."
					},
					"response": []
				},
				{
					"name": "Liveness Check",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl{{environment}}}}/health/liveness",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"health",
								"liveness"
							]
						},
						"description": "Verifica se a aplica√ß√£o est√° viva (para Kubernetes/Docker)\n\n**Endpoint p√∫blico** - n√£o requer autentica√ß√£o."
					},
					"response": []
				}
			],
			"description": "Endpoints de informa√ß√£o e health check da API (p√∫blicos)"
		},
		{
			"name": "API Keys",
			"item": [
				{
					"name": "Criar API Key",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"teamId\": \"{{teamId}}\",\n  \"name\": \"Integra√ß√£o Produ√ß√£o\",\n  \"allowedEndpoints\": null,\n  \"expiresAt\": null\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl{{environment}}}}/api/keys",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"api",
								"keys"
							]
						},
						"description": "Cria uma nova API Key para um workspace.\n\n**Par√¢metros:**\n- `teamId` (obrigat√≥rio): ID do Team no Slack\n- `name` (obrigat√≥rio): Nome descritivo da chave (ex: \"Integra√ß√£o Produ√ß√£o\")\n- `allowedEndpoints` (opcional): Array de endpoints permitidos. Null = todos permitidos\n  - Exemplo: `[\"/slack/channels\", \"/slack/users\"]`\n- `expiresAt` (opcional): Data de expira√ß√£o no formato ISO 8601. Null = sem expira√ß√£o\n  - Exemplo: `\"2026-12-31T23:59:59Z\"`\n\n**‚ö†Ô∏è IMPORTANTE:** A chave gerada ser√° retornada apenas uma vez! Guarde-a em local seguro.\n\n**Resposta de sucesso:**\n```json\n{\n  \"success\": true,\n  \"apiKey\": \"SUA_CHAVE_AQUI_BASE64\",\n  \"message\": \"IMPORTANTE: Guarde esta chave! Ela n√£o ser√° exibida novamente.\"\n}\n```"
					},
					"response": [
						{
							"name": "Sucesso",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"teamId\": \"{{teamId}}\",\n  \"name\": \"Integra√ß√£o Produ√ß√£o\",\n  \"allowedEndpoints\": null,\n  \"expiresAt\": null\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl{{environment}}}}/api/keys",
									"host": [
										"{{baseUrl{{environment}}}}"
									],
									"path": [
										"api",
										"keys"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json",
									"name": "Content-Type",
									"description": "",
									"type": "text"
								},
								{
									"key": "Date",
									"value": "Fri, 14 Nov 2025 14:08:47 GMT"
								},
								{
									"key": "Server",
									"value": "Kestrel"
								},
								{
									"key": "Transfer-Encoding",
									"value": "chunked"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"apiKey\": \"C3kocPnIR2Gv7IzBlBqWQAJJunuQhgo...\",\n    \"message\": \"IMPORTANTE: Guarde esta chave! Ela n√£o ser√° exibida novamente.\"\n}"
						}
					]
				},
				{
					"name": "Listar Minhas API Keys",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "Sua API Key para autentica√ß√£o",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl{{environment}}}}/api/keys",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"api",
								"keys"
							]
						},
						"description": "Lista todas as API Keys do seu workspace (team).\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`\n\nO TeamId √© identificado automaticamente atrav√©s da API Key fornecida.\n\n**Resposta:**\n- Lista de chaves (sem mostrar a chave completa, apenas metadata)\n- Inclui: Id, Name, IsActive, AllowedEndpoints, CreatedAt, LastUsedAt, ExpiresAt"
					},
					"response": [
						{
							"name": "Sucesso",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "X-Api-Key",
										"value": "{{apiKey}}",
										"description": "Sua API Key para autentica√ß√£o",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl{{environment}}}}/api/keys",
									"host": [
										"{{baseUrl{{environment}}}}"
									],
									"path": [
										"api",
										"keys"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": null,
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json; charset=utf-8"
								},
								{
									"key": "Date",
									"value": "Fri, 14 Nov 2025 14:32:06 GMT"
								},
								{
									"key": "Server",
									"value": "Kestrel"
								},
								{
									"key": "Transfer-Encoding",
									"value": "chunked"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"keys\": [\n        {\n            \"id\": 1,\n            \"name\": \"Integra√ß√£o Produ√ß√£o\",\n            \"isActive\": true,\n            \"allowedEndpoints\": null,\n            \"createdAt\": \"2025-11-14T14:08:49\",\n            \"lastUsedAt\": \"2025-11-14T14:32:07\",\n            \"expiresAt\": null,\n            \"keyPreview\": \"C3ko...F2Fa\"\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Revogar API Key",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "DELETE",
						"header": [
							{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "Sua API Key para autentica√ß√£o",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl{{environment}}}}/api/keys/:apiKeyToRevoke",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"api",
								"keys",
								":apiKeyToRevoke"
							],
							"variable": [
								{
									"key": "apiKeyToRevoke",
									"value": "{{apiKey}}",
									"description": "A API Key que ser√° revogada"
								}
							]
						},
						"description": "Revoga (desativa permanentemente) uma API Key.\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`\n\nAp√≥s a revoga√ß√£o, a chave n√£o poder√° mais ser usada para autentica√ß√£o.\n\n**Nota:** Voc√™ pode revogar qualquer chave do seu workspace, incluindo a pr√≥pria chave que est√° usando para autenticar."
					},
					"response": []
				}
			],
			"description": "Gerenciamento de API Keys para autentica√ß√£o de workspaces externos.\n\n## Como funciona?\n\n1. **Crie uma API Key** para seu workspace\n2. **Guarde a chave** em local seguro (ela s√≥ √© exibida uma vez)\n3. **Use a chave** no header `X-Api-Key` em todos os requests\n4. **O Skybot gerencia** automaticamente os tokens do Slack (refresh, expira√ß√£o, etc)\n\n## Vantagens\n\n‚úÖ Workspaces externos nunca lidam com tokens do Slack  \n‚úÖ Refresh de tokens √© autom√°tico e transparente  \n‚úÖ Controle granular de permiss√µes por endpoint  \n‚úÖ Rastreamento de uso (LastUsedAt)  \n‚úÖ Expira√ß√£o autom√°tica configur√°vel  \n‚úÖ M√∫ltiplas chaves por workspace (prod, staging, dev)",
			"auth": {
				"type": "noauth"
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Slack Auth",
			"item": [
				{
					"name": "Gerar Link de Instala√ß√£o",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/install",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"slack",
								"install"
							]
						},
						"description": "Gera URL de instala√ß√£o do app no Slack\n\n**Endpoint p√∫blico** - n√£o requer autentica√ß√£o."
					},
					"response": []
				},
				{
					"name": "OAuth Callback",
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "GET",
				"header": [],
						"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/oauth?code=oauth_code_here&state=optional_state",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"slack",
								"oauth"
							],
							"query": [
								{
									"key": "code",
									"value": "oauth_code_here",
									"description": "C√≥digo OAuth do Slack"
								},
								{
									"key": "state",
									"value": "optional_state",
									"description": "State opcional para seguran√ßa"
								}
							]
						},
						"description": "Processa callback OAuth do Slack e armazena tokens (com refresh token)\n\n**Endpoint p√∫blico** - n√£o requer autentica√ß√£o.\n\nEste endpoint √© chamado automaticamente pelo Slack ap√≥s o usu√°rio autorizar o app.\n\n**Comportamento:**\n- Armazena tokens do Slack no banco de dados\n- Gera API Key automaticamente para o workspace\n- Envia mensagem DM para o administrador com a API Key"
					},
					"response": []
				},
				{
					"name": "Desconectar Team",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "DELETE",
						"header": [
							{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "API Key para autentica√ß√£o",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/team",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"slack",
								"team"
							]
						},
						"description": "Revoga token e desconecta um team do Slack\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`"
					},
					"response": []
				}
			],
			"description": "Endpoints relacionados √† autentica√ß√£o OAuth com o Slack"
		},
		{
			"name": "Slack Events",
			"item": [
				{
					"name": "Processar Evento do Slack",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"team_id\": \"{{teamId}}\",\n  \"event_id\": \"Ev1234567890\",\n  \"event\": {\n    \"type\": \"message\",\n    \"user\": \"{{userId}}\",\n    \"text\": \"!ajuda\",\n    \"channel\": \"{{channelId}}\",\n    \"ts\": \"1234567890.123456\"\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/events",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"slack",
								"events"
							]
						},
						"description": "Recebe e processa eventos do Slack (mensagens, men√ß√µes, etc)\n\n**Endpoint p√∫blico** - n√£o requer autentica√ß√£o.\n\nEste endpoint √© chamado automaticamente pelo Slack quando eventos ocorrem no workspace."
					},
					"response": []
				},
				{
					"name": "Processar Intera√ß√£o (Bot√µes/Modais)",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "payload",
									"value": "{\"type\":\"block_actions\",\"team\":{\"id\":\"{{teamId}}\"},\"user\":{\"id\":\"{{userId}}\"},\"actions\":[{\"action_id\":\"confirm_ai_yes\",\"value\":\"thread_key\"}]}",
									"description": "Payload JSON serializado"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/interactive",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"slack",
								"interactive"
							]
						},
						"description": "Processa intera√ß√µes do Slack (cliques em bot√µes, envio de modais)\n\n**Endpoint p√∫blico** - n√£o requer autentica√ß√£o.\n\nEste endpoint √© chamado automaticamente pelo Slack quando usu√°rios interagem com componentes do bot."
					},
					"response": []
				}
			],
			"description": "Endpoints que recebem webhooks do Slack (p√∫blicos)"
		},
		{
			"name": "Slack Channels",
			"item": [
				{
					"name": "Listar Canais",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "API Key para autentica√ß√£o",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/channels",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"slack",
								"channels"
							]
						},
						"description": "Lista canais p√∫blicos do workspace\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`\n\nO TeamId √© identificado automaticamente atrav√©s da API Key.\n\n**Refresh autom√°tico:** Se o token do Slack expirar, o sistema automaticamente renova e tenta novamente."
					},
					"response": []
				},
				{
					"name": "Criar Canal",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "API Key para autentica√ß√£o",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
				"body": {
					"mode": "raw",
							"raw": "{\n  \"Name\": \"novo-canal-teste\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/channels",
					"host": [
						"{{baseUrl{{environment}}}}"
					],
					"path": [
						"slack",
						"channels"
							]
						},
						"description": "Cria um novo canal p√∫blico no Slack\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`\n\nO TeamId √© identificado automaticamente atrav√©s da API Key.\n\n**Refresh autom√°tico:** Se o token do Slack expirar, o sistema automaticamente renova e tenta novamente."
					},
					"response": []
				},
				{
					"name": "Listar Membros do Canal",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
						{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "API Key para autentica√ß√£o",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/channels/:channelId/members",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"slack",
								"channels",
								":channelId",
								"members"
							],
							"variable": [
								{
									"key": "channelId",
									"value": "{{channelId}}",
									"description": "ID do canal no Slack"
								}
							]
						},
						"description": "Lista membros de um canal espec√≠fico (at√© 50 membros)\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`\n\nO TeamId √© identificado automaticamente atrav√©s da API Key."
					},
					"response": []
				},
				{
					"name": "Entrar em Canal",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "API Key para autentica√ß√£o",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/join/:channelId",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"slack",
								"join",
								":channelId"
							],
							"variable": [
								{
									"key": "channelId",
									"value": "{{channelId}}",
									"description": "ID do canal para entrar"
								}
							]
						},
						"description": "Faz o bot entrar em um canal espec√≠fico\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`\n\nO TeamId √© identificado automaticamente atrav√©s da API Key.\n\n**Refresh autom√°tico:** Se o token do Slack expirar, o sistema automaticamente renova e tenta novamente."
					},
					"response": []
				},
				{
					"name": "Enviar Mensagem",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "API Key para autentica√ß√£o",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"destinationType\": \"CHANNEL\",\n  \"destinationId\": \"{{channelId}}\",\n  \"text\": \"Ol√°! Esta √© uma mensagem de teste enviada via API. üöÄ\\n\\n*Suporta markdown:* _it√°lico_, ~tachado~\",\n  \"threadTs\": null\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/messages",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"slack",
								"messages"
							]
						},
						"description": "Envia mensagem para um canal, usu√°rio ou grupo no Slack\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`\n\n**Par√¢metros obrigat√≥rios:**\n- `destinationType` (string): Tipo de destino\n  - `CHANNEL` - Canal p√∫blico/privado (ID come√ßa com C)\n  - `USER` - Usu√°rio via DM (ID come√ßa com U)\n  - `GROUP` - Grupo/Conversa (ID come√ßa com G)\n- `destinationId` (string): ID do destino no Slack\n  - Exemplo canal: `C09KM8W0MST`\n  - Exemplo usu√°rio: `U09K48KPT41`\n  - Exemplo grupo: `G1234567890`\n\n**Conte√∫do (escolha UM):**\n- `text` (string): Mensagem em texto simples com suporte a markdown do Slack\n  - _it√°lico_, *negrito*, ~tachado~\n  - M√°ximo: 4000 caracteres\n- `blocks` (array): Array de blocos Block Kit para mensagens ricas\n  - Ver: https://api.slack.com/block-kit\n\n**Opcional:**\n- `threadTs` (string): Timestamp de mensagem para responder em thread\n\n**Refresh autom√°tico:** Se o token do Slack expirar, o sistema automaticamente renova e tenta novamente.\n\n**Resposta de sucesso:**\n```json\n{\n  \"success\": true,\n  \"messageTs\": \"1234567890.123456\",\n  \"requestId\": \"61f3aa06445f4dbaac108aa235f84f02\",\n  \"message\": \"Mensagem enviada com sucesso\"\n}\n```\n\n**Campos da resposta:**\n- `messageTs`: Timestamp √∫nico da mensagem no Slack (use para deletar/referenciar)\n- `requestId`: ID √∫nico da requisi√ß√£o para auditoria e rastreamento"
					},
					"response": [
						{
							"name": "Exemplo: Mensagem Simples",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "X-Api-Key",
										"value": "{{apiKey}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"destinationType\": \"CHANNEL\",\n  \"destinationId\": \"C09KM8W0MST\",\n  \"text\": \"Ol√°! Mensagem simples com *markdown*\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl{{environment}}}}/slack/messages",
									"host": [
										"{{baseUrl{{environment}}}}"
									],
									"path": [
										"slack",
										"messages"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
						"cookie": [],
						"body": "{\n  \"success\": true,\n  \"messageTs\": \"1731596040.123456\",\n  \"requestId\": \"61f3aa06445f4dbaac108aa235f84f02\",\n  \"message\": \"Mensagem enviada com sucesso\"\n}"
						},
						{
							"name": "Exemplo: Block Kit",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "X-Api-Key",
										"value": "{{apiKey}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
						}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"destinationType\": \"CHANNEL\",\n  \"destinationId\": \"C09KM8W0MST\",\n  \"blocks\": [\n    {\n      \"type\": \"header\",\n      \"text\": {\n        \"type\": \"plain_text\",\n        \"text\": \"üìä Relat√≥rio Di√°rio\"\n      }\n    },\n    {\n      \"type\": \"section\",\n      \"text\": {\n        \"type\": \"mrkdwn\",\n        \"text\": \"*Status:* ‚úÖ Tudo operacional\\n*Uptime:* 99.9%\\n*Requests:* 1.2M\"\n      }\n    },\n    {\n      \"type\": \"divider\"\n    },\n    {\n      \"type\": \"section\",\n      \"text\": {\n        \"type\": \"mrkdwn\",\n        \"text\": \"Veja mais detalhes no dashboard.\"\n      },\n      \"accessory\": {\n        \"type\": \"button\",\n        \"text\": {\n          \"type\": \"plain_text\",\n          \"text\": \"Abrir Dashboard\"\n        },\n        \"url\": \"https://exemplo.com/dashboard\"\n      }\n    }\n  ]\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl{{environment}}}}/slack/messages",
									"host": [
										"{{baseUrl{{environment}}}}"
									],
									"path": [
										"slack",
										"messages"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
						"cookie": [],
						"body": "{\n  \"success\": true,\n  \"messageTs\": \"1731596055.234567\",\n  \"requestId\": \"a7b2c4e8f9d3456a8c1234567890abcd\",\n  \"message\": \"Mensagem enviada com sucesso\"\n}"
						},
						{
							"name": "Exemplo: DM para Usu√°rio",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "X-Api-Key",
										"value": "{{apiKey}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"destinationType\": \"USER\",\n  \"destinationId\": \"U09K48KPT41\",\n  \"text\": \"Ol√°! Esta √© uma mensagem direta.\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl{{environment}}}}/slack/messages",
									"host": [
										"{{baseUrl{{environment}}}}"
									],
									"path": [
										"slack",
										"messages"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
						"cookie": [],
						"body": "{\n  \"success\": true,\n  \"messageTs\": \"1731596065.345678\",\n  \"requestId\": \"b9c8d7e6f5a4321098765432bcdef012\",\n  \"message\": \"Mensagem enviada com sucesso\"\n}"
						},
						{
							"name": "Exemplo: Resposta em Thread",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "X-Api-Key",
										"value": "{{apiKey}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"destinationType\": \"CHANNEL\",\n  \"destinationId\": \"C09KM8W0MST\",\n  \"text\": \"Esta √© uma resposta na thread!\",\n  \"threadTs\": \"1731595000.123456\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl{{environment}}}}/slack/messages",
									"host": [
										"{{baseUrl{{environment}}}}"
									],
									"path": [
										"slack",
										"messages"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
						"cookie": [],
						"body": "{\n  \"success\": true,\n  \"messageTs\": \"1731596075.456789\",\n  \"requestId\": \"e3f2a1d0c9b8765432109876fedcba98\",\n  \"message\": \"Mensagem enviada com sucesso\"\n}"
						}
					]
				},
				{
					"name": "Apagar Mensagem",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "DELETE",
						"header": [
							{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "API Key para autentica√ß√£o",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"channel\": \"{{channelId}}\",\n  \"messageTs\": \"1731596040.123456\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/messages",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"slack",
								"messages"
							]
						},
						"description": "Apaga uma mensagem enviada pelo bot no Slack\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`\n\n**Par√¢metros obrigat√≥rios:**\n- `channel` (string): ID do canal onde est√° a mensagem\n- `messageTs` (string): Timestamp da mensagem a ser apagada\n\n**Limita√ß√µes:**\n- O bot s√≥ pode apagar mensagens que ele mesmo enviou\n- N√£o √© poss√≠vel apagar mensagens de outros usu√°rios\n\n**Resposta de sucesso:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Mensagem apagada com sucesso\"\n}\n```"
					},
					"response": []
				},
				{
					"name": "Relat√≥rio Di√°rio",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "API Key para autentica√ß√£o",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/messages/reports/daily?date=2025-11-14",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"slack",
								"messages",
								"reports",
								"daily"
							],
							"query": [
								{
									"key": "date",
									"value": "2025-11-14",
									"description": "Data do relat√≥rio (opcional, padr√£o: hoje)"
								}
							]
						},
						"description": "Relat√≥rio de mensagens enviadas em um dia espec√≠fico\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`\n\n**Par√¢metros:**\n- `date` (opcional): Data no formato YYYY-MM-DD. Se omitido, usa a data atual.\n\n**Resposta:**\n```json\n{\n  \"date\": \"2025-11-14\",\n  \"statistics\": {\n    \"CHANNEL\": 45,\n    \"USER\": 12,\n    \"GROUP\": 3\n  },\n  \"total\": 60\n}\n```"
					},
					"response": []
				},
				{
					"name": "Relat√≥rio Semanal",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "API Key para autentica√ß√£o",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/messages/reports/weekly?startDate=2025-11-07",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"slack",
								"messages",
								"reports",
								"weekly"
							],
							"query": [
								{
									"key": "startDate",
									"value": "2025-11-07",
									"description": "Data de in√≠cio (opcional, padr√£o: 7 dias atr√°s)"
								}
							]
						},
						"description": "Relat√≥rio de mensagens enviadas em uma semana (7 dias)\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`\n\n**Par√¢metros:**\n- `startDate` (opcional): Data de in√≠cio no formato YYYY-MM-DD. Se omitido, usa 7 dias atr√°s.\n\n**Resposta:**\n```json\n{\n  \"startDate\": \"2025-11-07\",\n  \"endDate\": \"2025-11-14\",\n  \"dailyStatistics\": {\n    \"2025-11-07\": 45,\n    \"2025-11-08\": 52,\n    \"2025-11-09\": 38\n  },\n  \"total\": 285\n}\n```"
					},
					"response": []
				},
				{
					"name": "Relat√≥rio Mensal",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "API Key para autentica√ß√£o",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/messages/reports/monthly?year=2025&month=11",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"slack",
								"messages",
								"reports",
								"monthly"
							],
							"query": [
								{
									"key": "year",
									"value": "2025",
									"description": "Ano (opcional, padr√£o: ano atual)"
								},
								{
									"key": "month",
									"value": "11",
									"description": "M√™s (1-12) (opcional, padr√£o: m√™s atual)"
								}
							]
						},
						"description": "Relat√≥rio de mensagens enviadas em um m√™s espec√≠fico\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`\n\n**Par√¢metros:**\n- `year` (opcional): Ano. Se omitido, usa o ano atual.\n- `month` (opcional): M√™s (1-12). Se omitido, usa o m√™s atual.\n\n**Resposta:**\n```json\n{\n  \"year\": 2025,\n  \"month\": 11,\n  \"dailyStatistics\": {\n    \"1\": 45,\n    \"2\": 52,\n    \"3\": 38,\n    \"...\": \"...\"\n  },\n  \"total\": 1245\n}\n```"
					},
					"response": []
				},
				{
					"name": "Auditoria de Mensagens",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "API Key para autentica√ß√£o",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/messages/logs/audit?startDate=2025-11-07&endDate=2025-11-14&ip=&apiKeyName=",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"slack",
								"messages",
								"logs",
								"audit"
							],
							"query": [
								{
									"key": "startDate",
									"value": "2025-11-07",
									"description": "Data de in√≠cio (opcional, padr√£o: 7 dias atr√°s)"
								},
								{
									"key": "endDate",
									"value": "2025-11-14",
									"description": "Data de fim (opcional, padr√£o: hoje)"
								},
								{
									"key": "ip",
									"value": "",
									"description": "Filtrar por IP espec√≠fico (opcional)"
								},
								{
									"key": "apiKeyName",
									"value": "",
									"description": "Filtrar por nome da API Key (opcional)"
								}
							]
						},
						"description": "Log de auditoria de mensagens enviadas com informa√ß√µes detalhadas\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`\n\n**Par√¢metros (todos opcionais):**\n- `startDate`: Data de in√≠cio (padr√£o: 7 dias atr√°s)\n- `endDate`: Data de fim (padr√£o: hoje)\n- `ip`: Filtrar por IP de origem\n- `apiKeyName`: Filtrar por nome da API Key\n\n**Resposta:**\n```json\n{\n  \"count\": 150,\n  \"logs\": [\n    {\n      \"messageTs\": \"1731596040.123456\",\n      \"channel\": \"C09KM8W0MST\",\n      \"destinationType\": \"CHANNEL\",\n      \"sentAt\": \"2025-11-14T10:30:00\",\n      \"sourceIp\": \"192.168.1.100\",\n      \"forwardedFor\": \"203.0.113.42\",\n      \"userAgent\": \"PostmanRuntime/7.32.3\",\n      \"apiKeyName\": \"Integra√ß√£o Produ√ß√£o\",\n      \"status\": \"SENT\"\n    }\n  ]\n}\n```"
					},
					"response": []
				}
			],
			"description": "Opera√ß√µes com canais do Slack (todos requerem autentica√ß√£o via API Key)"
		},
		{
			"name": "Slack Users",
			"item": [
				{
					"name": "Listar Usu√°rios",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "API Key para autentica√ß√£o",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/users",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"slack",
								"users"
							]
						},
						"description": "Lista todos os usu√°rios do workspace\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`\n\nO TeamId √© identificado automaticamente atrav√©s da API Key.\n\n**Refresh autom√°tico:** Se o token do Slack expirar, o sistema automaticamente renova e tenta novamente."
					},
					"response": []
				}
			],
			"description": "Opera√ß√µes com usu√°rios do Slack (todos requerem autentica√ß√£o via API Key)"
		},
		{
			"name": "Slack Home",
			"item": [
				{
					"name": "Publicar Home View",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "API Key para autentica√ß√£o",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/home?userId={{userId}}",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"slack",
								"home"
							],
							"query": [
								{
									"key": "userId",
									"value": "{{userId}}",
									"description": "ID do usu√°rio no Slack"
								}
							]
						},
						"description": "Publica/atualiza a Home tab do app para um usu√°rio\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`\n\nO TeamId √© identificado automaticamente atrav√©s da API Key.\n\n**Refresh autom√°tico:** Se o token do Slack expirar, o sistema automaticamente renova e tenta novamente."
			},
			"response": []
				}
			],
			"description": "Opera√ß√µes com a Home tab do Slack (todos requerem autentica√ß√£o via API Key)"
		},
		{
			"name": "Reminders",
			"item": [
				{
					"name": "Listar Lembretes do Team",
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "GET",
				"header": [
					{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "API Key para autentica√ß√£o",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{baseUrl{{environment}}}}/slack/reminders",
					"host": [
						"{{baseUrl{{environment}}}}"
					],
					"path": [
						"slack",
						"reminders"
					]
						},
						"description": "Lista todos os lembretes do workspace\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`\n\nO TeamId √© identificado automaticamente atrav√©s da API Key."
					},
					"response": []
				},
				{
					"name": "Listar Lembretes de um Usu√°rio",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "API Key para autentica√ß√£o",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl{{environment}}}}/slack/reminders/user/:userId",
							"host": [
								"{{baseUrl{{environment}}}}"
							],
							"path": [
								"slack",
								"reminders",
								"user",
								":userId"
							],
							"variable": [
								{
									"key": "userId",
									"value": "{{userId}}",
									"description": "ID do usu√°rio no Slack"
								}
							]
						},
						"description": "Lista lembretes de um usu√°rio espec√≠fico\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`\n\nO TeamId √© identificado automaticamente atrav√©s da API Key."
			},
			"response": []
		},
		{
			"name": "Criar Lembrete",
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "POST",
				"header": [
					{
								"key": "X-Api-Key",
								"value": "{{apiKey}}",
								"description": "API Key para autentica√ß√£o",
						"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
							"raw": "{\n    \"UserId\": \"{{userId}}\",\n    \"Message\": \"Reuni√£o importante √†s 15h\",\n    \"DueDate\": \"2025-11-15T15:00:00\",\n    \"ChannelId\": \"{{channelId}}\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{baseUrl{{environment}}}}/slack/reminders",
					"host": [
						"{{baseUrl{{environment}}}}"
					],
					"path": [
						"slack",
						"reminders"
					]
						},
						"description": "Cria um novo lembrete\n\n**Autentica√ß√£o:** Requer header `X-Api-Key`\n\nO TeamId √© identificado automaticamente atrav√©s da API Key.\n\n**Par√¢metros:**\n- `UserId`: ID do usu√°rio no Slack\n- `Message`: Mensagem do lembrete\n- `DueDate`: Data/hora em hor√°rio de Bras√≠lia (GMT-3) no formato ISO 8601\n- `ChannelId` (opcional): Se fornecido, envia mensagem no canal tamb√©m"
			},
			"response": []
				}
			],
			"description": "Gerenciamento de lembretes (todos requerem autentica√ß√£o via API Key)"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					"// Script pr√©-requisi√ß√£o global",
					"console.log('Executando request para:', pm.request.url.toString());",
					"",
					"// Verifica se a API Key est√° configurada para endpoints protegidos",
					"const url = pm.request.url.toString();",
					"const publicEndpoints = ['/', '/health', '/slack/install', '/slack/oauth', '/slack/events', '/slack/interactive'];",
					"",
					"const isPublic = publicEndpoints.some(endpoint => url.includes(endpoint));",
					"",
					"if (!isPublic && !pm.request.headers.has('X-Api-Key')) {",
					"    console.warn('‚ö†Ô∏è Endpoint protegido sem API Key! Adicione o header X-Api-Key');",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					"// Testes globais",
					"pm.test('Status code is success', function () {",
					"    pm.expect(pm.response.code).to.be.oneOf([200, 201, 204]);",
					"});",
					"",
					"// Se for erro de autentica√ß√£o, mostra dica",
					"if (pm.response.code === 401) {",
					"    console.error('‚ùå Erro de autentica√ß√£o! Verifique se o header X-Api-Key est√° correto.');",
					"}",
					"",
					"if (pm.response.code === 403) {",
					"    console.error('‚ùå Acesso negado! Verifique se a API Key tem permiss√£o para este endpoint.');",
					"}"
				]
			}
		}
	],
	"variable": [
		{
			"key": "environment",
			"value": "Prod",
			"description": "Ambiente atual (vazio para prod, 'Local' para local)"
		},
		{
			"key": "baseUrlProd",
			"value": "https://skyapi.skymedia.com.br",
			"description": "URL base da API em produ√ß√£o"
		},
		{
			"key": "baseUrlLocal",
			"value": "http://localhost:5000",
			"description": "URL base da API em desenvolvimento local"
		},
		{
			"key": "teamId",
			"value": "T09K2BS0A65",
			"description": "ID do Team no Slack"
		},
		{
			"key": "userId",
			"value": "U09K48KPT41",
			"description": "ID do Usu√°rio no Slack"
		},
		{
			"key": "channelId",
			"value": "C09KM8W0MST",
			"description": "ID do Canal no Slack"
		},
		{
			"key": "apiKey",
			"value": "",
			"description": "Sua API Key para autentica√ß√£o (obtenha atrav√©s do endpoint 'Criar API Key')"
		}
	]
}